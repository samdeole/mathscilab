{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\src\\\\pages\\\\Booking.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './Booking.css';\nimport courseData from './courseSchedule.json';\nimport { PaymentElement, useStripe, useElements } from '@stripe/react-stripe-js';\nimport StripeWrapper from './Payment/StripeWrapper';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function BookingPage() {\n  _s();\n  const [step, setStep] = useState(1);\n  const [selectedLevel, setSelectedLevel] = useState('');\n  const [selectedCourse, setSelectedCourse] = useState('');\n  const [selectedSessions, setSelectedSessions] = useState([]);\n  const [formFilled, setFormFilled] = useState(false);\n  const [clientSecret, setClientSecret] = useState('');\n  const stripe = useStripe();\n  const elements = useElements();\n  useEffect(() => {\n    if (selectedSessions.length > 0) {\n      const totalAmount = selectedSessions.reduce((sum, s) => sum + parseFloat(s.fee.replace('$', '')), 0);\n      fetch('http://localhost:5000/api/create-payment-intent', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          amount: Math.round(totalAmount * 100)\n        }) // Stripe accepts cents\n      }).then(res => res.json()).then(data => setClientSecret(data.clientSecret)).catch(err => console.error('Error creating payment intent:', err));\n    }\n  }, [selectedSessions]);\n  const nextStep = () => {\n    if (step === 2 && !formFilled) {\n      alert('Please fill in all required fields.');\n      return;\n    }\n    setStep(prev => prev + 1);\n  };\n  const prevStep = () => setStep(prev => prev - 1);\n  const levels = [...new Set(courseData.map(item => item.year))];\n  const allCourses = courseData.filter(course => course.year === selectedLevel);\n  const filteredCourses = allCourses.filter(course => course.subject === selectedCourse);\n  const handleLevelChange = e => {\n    setSelectedLevel(e.target.value);\n    setSelectedCourse('');\n    setSelectedSessions([]);\n  };\n  const handleCourseChange = e => {\n    setSelectedCourse(e.target.value);\n    setSelectedSessions([]);\n  };\n  const handleSelectSession = session => {\n    setSelectedSessions([session]);\n  };\n  const handleStripeSubmit = async e => {\n    e.preventDefault();\n    if (!stripe || !elements) return;\n    const result = await stripe.confirmPayment({\n      elements,\n      confirmParams: {\n        return_url: window.location.origin + '/success'\n      }\n    });\n    if (result.error) {\n      alert(result.error.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"booking-container styled\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"step-indicator\",\n      children: [1, 2, 3].map(n => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `step ${step === n ? 'active' : ''}`,\n        children: n\n      }, n, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n_s(BookingPage, \"kqER/AqAYUBI18YtzMYXvTtpzLc=\", false, function () {\n  return [useStripe, useElements];\n});\n_c = BookingPage;\nvar _c;\n$RefreshReg$(_c, \"BookingPage\");","map":{"version":3,"names":["React","useState","useEffect","courseData","PaymentElement","useStripe","useElements","StripeWrapper","jsxDEV","_jsxDEV","BookingPage","_s","step","setStep","selectedLevel","setSelectedLevel","selectedCourse","setSelectedCourse","selectedSessions","setSelectedSessions","formFilled","setFormFilled","clientSecret","setClientSecret","stripe","elements","length","totalAmount","reduce","sum","s","parseFloat","fee","replace","fetch","method","headers","body","JSON","stringify","amount","Math","round","then","res","json","data","catch","err","console","error","nextStep","alert","prev","prevStep","levels","Set","map","item","year","allCourses","filter","course","filteredCourses","subject","handleLevelChange","e","target","value","handleCourseChange","handleSelectSession","session","handleStripeSubmit","preventDefault","result","confirmPayment","confirmParams","return_url","window","location","origin","message","className","children","n","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Projects/src/pages/Booking.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './Booking.css';\r\nimport courseData from './courseSchedule.json';\r\nimport { PaymentElement, useStripe, useElements } from '@stripe/react-stripe-js';\r\nimport StripeWrapper from './Payment/StripeWrapper';\r\n\r\nexport default function BookingPage() {\r\n  const [step, setStep] = useState(1);\r\n  const [selectedLevel, setSelectedLevel] = useState('');\r\n  const [selectedCourse, setSelectedCourse] = useState('');\r\n  const [selectedSessions, setSelectedSessions] = useState([]);\r\n  const [formFilled, setFormFilled] = useState(false);\r\n  const [clientSecret, setClientSecret] = useState('');\r\n\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n\r\n  useEffect(() => {\r\n    if (selectedSessions.length > 0) {\r\n      const totalAmount = selectedSessions.reduce((sum, s) => sum + parseFloat(s.fee.replace('$', '')), 0);\r\n\r\n      fetch('http://localhost:5000/api/create-payment-intent', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ amount: Math.round(totalAmount * 100) }) // Stripe accepts cents\r\n      })\r\n        .then(res => res.json())\r\n        .then(data => setClientSecret(data.clientSecret))\r\n        .catch(err => console.error('Error creating payment intent:', err));\r\n    }\r\n  }, [selectedSessions]);\r\n\r\n  const nextStep = () => {\r\n    if (step === 2 && !formFilled) {\r\n      alert('Please fill in all required fields.');\r\n      return;\r\n    }\r\n    setStep(prev => prev + 1);\r\n  };\r\n\r\n  const prevStep = () => setStep(prev => prev - 1);\r\n\r\n  const levels = [...new Set(courseData.map(item => item.year))];\r\n  const allCourses = courseData.filter(course => course.year === selectedLevel);\r\n  const filteredCourses = allCourses.filter(course => course.subject === selectedCourse);\r\n\r\n  const handleLevelChange = (e) => {\r\n    setSelectedLevel(e.target.value);\r\n    setSelectedCourse('');\r\n    setSelectedSessions([]);\r\n  };\r\n\r\n  const handleCourseChange = (e) => {\r\n    setSelectedCourse(e.target.value);\r\n    setSelectedSessions([]);\r\n  };\r\n\r\n  const handleSelectSession = (session) => {\r\n    setSelectedSessions([session]);\r\n  };\r\n\r\n  const handleStripeSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!stripe || !elements) return;\r\n\r\n    const result = await stripe.confirmPayment({\r\n      elements,\r\n      confirmParams: {\r\n        return_url: window.location.origin + '/success',\r\n      },\r\n    });\r\n\r\n    if (result.error) {\r\n      alert(result.error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"booking-container styled\">\r\n      <div className=\"step-indicator\">\r\n        {[1, 2, 3].map(n => (\r\n          <div key={n} className={`step ${step === n ? 'active' : ''}`}>{n}</div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Your original JSX code remains unchanged for steps 1, 2, and 3 */}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}